=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2016.12.26 11:00:52 =~=~=~=~=~=~=~=~=~=~=~=
Using username "pmalko".
Authenticating with public key "imported-openssh-key" from agent
Last login: Sat Dec 24 15:43:33 2016 from 10.57.2.17
]0;pmalko@figaro: ~pmalko@figaro:~$ [K]0;pmalko@figaro: ~pmalko@figaro:~$ 
]0;pmalko@figaro: ~pmalko@figaro:~$ 
]0;pmalko@figaro: ~pmalko@figaro:~$ 
]0;pmalko@figaro: ~pmalko@figaro:~$ cd ./script/ds_bkp/
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git status
# On branch threadet
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#	new file:   .idea/ds_bkp.iml
#	new file:   .idea/misc.xml
#	new file:   .idea/modules.xml
#	new file:   .idea/vcs.xml
#	new file:   .idea/workspace.xml
#	modified:   backup_ds.py
#	modified:   ds_helper.py
#
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git reset --hard HEAD
HEAD is now at 54927e6 Threads work correction
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ 
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ 
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git status 
# On branch threadet
nothing to commit (working directory clean)
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ 
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ ./ds_helper.py [K[K[K[K[K[K[K[K[K[Khelper.py 
['ds3-kha3', 'ds3-kha3', 'ds3-kha3', 'ds3-kha3', 'ds3-kha3', 'ds3-kha3', 'ds3-kha3', 'ds3-kha3']
['SAS-M', 'SAS-M', 'SAS-M']
['cf1:\\images\\TiMOS-7.0.R9\x08oth.tim']
['cf1:\\images\\TiMOS-B-4.0.R2\x08oth.tim']
['03/19/2012  12:05p             4235928 ', '01/21/2001  01:51p            43352608 ']
4235928
['27013120', '27013120']
['TiMOS-B-7.0.R9', 'TiMOS-B-4.0.R2', 'TiMOS-B-7.0.R9', 'TiMOS-L-4.0.R2']
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ ./ds_helper.py [K[K[K[K[K[K[K[K[K[K[K_bk[K[Khelper.py [K[K[K[K[K[K[K[K[K[K[K[K[Kbackup_ds.py ds1-kha3 ds2-kha3
Usage: backup_ds.py [file with ds list]

backup_ds.py: error: Use [-f <ds list file> | ds ds ds ...]
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ vim bac[K[K[K./backup_ds.py 
[?1049h[?1h=[1;63r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[61;1H"./backup_ds.py" 159L, 5171C[>c[1;1H[34m[47m [m#!/usr/bin/env python2.6
[34m[47m [m# -*- coding: utf-8
[34m[47m 
 [mimport sys
[34m[47m [mimport threading
[34m[47m [mimport time
[34m[47m [mimport re
[34m[47m [mimport getpass
[34m[47m [mimport os
[34m[47m [mimport optparse
[34m[47m 
 [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/ecdsa-0.13-py2.6.egg/')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/requests-2.9.1-py2.6.egg')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg')
[34m[47m 
 [mimport paramiko
[34m[47m [mfrom paramiko import AuthenticationException
[34m[47m [mfrom socket import gaierror
[34m[47m [mfrom scp import SCPClient
[34m[47m [mfrom ds_helper import ds_print, RE, extract
[34m[47m 
 [mAUTHORISE_TRY_COUNT, \
[34m[47m [mCONNECT_TRY_INTERVAL = 5, 7
[34m[47m [mio_lock = threading.Lock
[34m[47m 
 
+0------------------------------------------------------------------------------------------------------------------[28;1H 
+0------------------------------------------------------------------------------------------------------------------[30;1H 
+0------------------------------------------------------------------------------------------------------------------[32;1H 
+0------------------------------------------------------------------------------------------------------------------[34;1H 
 [mparser = optparse.OptionParser(description='Get config from DS\'s and move them to 1.140',
[34m[47m [m[30C usage="usage: %prog [file with ds list]")
[34m[47m [mparser.add_option("-f", "--file", dest="ds_list_file_name",
[34m[47m [m[17C help="file with list DS", metavar="FILE")
[34m[47m [m#parser.add_option( help='Path to file with list of ds', required=True)
[34m[47m 
 [m(options, args) = parser.parse_args()
[34m[47m [mif not options.ds_list_file_name or not args:
[34m[47m [m    parser.error("Use [-f <ds list file> | ds ds ds ...]")
[34m[47m 
 [mds_list = args
[34m[47m [mif options.ds_list_file_name:
[34m[47m [m    try:
[34m[47m [m[7C with open(options.ds_list_file_name) as ds_list_file:
[34m[47m [m[11C for line in ds_list_file.readlines():
[34m[47m [m[15C ds_list.append(extract(RE.DS_NAME, line))
[34m[47m [m    except IOError as e:
[34m[47m [m[7C print "Error while open file: {file}".format(file=options.ds_list_file_name)
[34m[47m [m[7C print e.message
[34m[47m 
 [mif len(ds_list) < 1:
[34m[47m [m    print "No ds found in arguments."
[34m[47m [m    exit()
[34m[47m 
 [muser = getpass.getuser()
[34m[47m [msecret = getpass.getpass('Password for DS:')[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89H~@k[1;2H[63;89H   [2;2H[63;99H2[2;2H[?12l[?25h[?25l[63;89H~@k[2;2H[63;89H   [3;2H[63;99H3,0-1[3;2H[?12l[?25h[?25l[63;89H~@k[3;2H[63;89H   [4;2H[63;99H4,1  [4;2H[?12l[?25h[?25l[63;89H~@k[4;2H[63;89H   [5;2H[63;99H5[5;2H[?12l[?25h[?25l[63;89H~@k[5;2H[63;89H   [6;2H[63;99H6[6;2H[?12l[?25h[?25l[63;89H~@k[6;2H[63;89H   [7;2H[63;99H7[7;2H[?12l[?25h[?25l[63;89H~@k[7;2H[63;89H   [8;2H[63;99H8[8;2H[?12l[?25h[?25l[63;89H~@k[8;2H[63;89H   [9;2H[63;99H9[9;2H[?12l[?25h[?25l[63;89H~@k[9;2H[63;89H   [10;2H[63;99H10,1[10;2H[?12l[?25h[?25l[63;89H~@k[10;2H[63;89H   [11;2H[63;100H1,0-1[11;2H[?12l[?25h[?25l[63;89H~@k[11;2H[63;89H   [12;2H[63;100H2,1  [12;2H[?12l[?25h[?25l[63;89H~@k[12;2H[63;89H   [13;2H[63;100H3[13;2H[?12l[?25h[?25l[63;89H~@k[13;2H[63;89H   [14;2H[63;100H4[14;2H[?12l[?25h[?25l[63;89H~@k[14;2H[63;89H   [15;2H[63;100H5,0-1[15;2H[?12l[?25h[?25l[63;89H~@k[15;2H[63;89H   [16;2H[63;100H6,1  [16;2H[?12l[?25h[?25l[63;89H~@k[16;2H[63;89H   [17;2H[63;100H7[17;2H[?12l[?25h[?25l[63;89H~@k[17;2H[63;89H   [18;2H[63;100H8[18;2H[?12l[?25h[?25l[63;89H~@k[18;2H[63;89H   [19;2H[63;100H9[19;2H[?12l[?25h[?25l[63;89H~@k[19;2H[63;89H   [20;2H[63;99H20[20;2H[?12l[?25h[?25l[63;89H~@k[20;2H[63;89H   [21;2H[63;100H1,0-1[21;2H[?12l[?25h[?25l[63;89H~@k[21;2H[63;89H   [22;2H[63;100H2,1  [22;2H[?12l[?25h[?25l[63;89H~@k[22;2H[63;89H   [23;2H[63;100H3[23;2H[?12l[?25h[?25l[63;89H~@k[23;2H[63;89H   [24;2H[63;100H4[24;2H[?12l[?25h[?25l[63;89H~@k[24;2H[63;89H   [25;2H[63;100H5,0-1[25;2H[?12l[?25h[?25l[63;89H~@k[25;2H[63;89H   [26;2H[63;100H6[26;2H[?12l[?25h[?25l[63;89H~@k[26;2H[63;89H   [27;2H[63;100H7,1  [27;2H[?12l[?25h[?25l[63;89H~@k[27;2H[63;89H   [28;2H[63;99H60,0-1[28;2H[?12l[?25h[?25l[63;89H~@k[28;2H[63;89H   [29;2H[63;100H1,1  [29;2H[?12l[?25h[?25l[63;89H~@k[29;2H[63;89H   [30;2H[63;99H82,0-1[30;2H[?12l[?25h[?25l[63;89H~@k[30;2H[63;89H   [31;2H[63;100H3,1  [31;2H[?12l[?25h[?25l[63;89H~@k[31;2H[63;89H   [32;2H[63;99H103,0-1[32;2H[?12l[?25h[?25l[63;89H~@k[32;2H[63;89H   [33;2H[63;101H4,1  [33;2H[?12l[?25h[?25l[63;89H~@k[33;2H[63;89H   [34;2H[63;100H10,0-1[34;2H[?12l[?25h[?25l[63;89H~@k[34;2H[63;89H   [35;2H[63;101H1,1  [35;2H[?12l[?25h[?25l[63;89H~@k[35;2H[63;89H   [36;2H[63;101H2[36;2H[?12l[?25h[?25l[63;89H~@k[36;2H[63;89H   [37;2H[63;101H3[37;2H[?12l[?25h[?25l[63;89H~@k[37;2H[63;89H   [38;2H[63;101H4[38;2H[?12l[?25h[?25l[63;89H~@k[38;2H[63;89H   [39;2H[63;101H5[39;2H[?12l[?25h[?25l[63;89H~@k[39;2H[63;89H   [40;2H[63;101H6,0-1[40;2H[?12l[?25h[?25l[63;89H~@k[40;2H[63;89H   [41;2H[46m([13C)[m[63;101H7,1  [41;2H[?12l[?25h[?25l[63;89H~@k[41;2H[63;89H   [42;2H[41;2H([13C)[63;101H8[42;2H[?12l[?25h[?25l[63;89H~@k[42;2H[63;89H   [43;2H[63;101H9[43;2H[?12l[?25h[?25l[63;89H~@k[43;2H[63;89H   [44;2H[63;100H20,0-1[44;2H[?12l[?25h[?25l[63;89H~@k[44;2H[63;89H   [45;2H[63;101H1,1  [45;2H[?12l[?25h[?25l[63;89H~@k[45;2H[63;89H   [46;2H[63;101H2[46;2H[?12l[?25h[?25l[63;89H~@k[46;2H[63;89H   [45;2H[63;101H1[45;2H[?12l[?25h[?25l[63;89H~@k[45;2H[63;89H   [44;2H[63;101H0,0-1[44;2H[?12l[?25h[?25l[63;89H~@k[44;2H[63;89H   [43;2H[63;100H19,1  [43;2H[?12l[?25h[?25l[63;89H~@k[43;2H[63;89H   [42;2H[63;101H8[42;2H[?12l[?25h[?25l[63;89H~@k[42;2H[63;89H   [42;3H[63;103H2[42;3H[?12l[?25h[?25l[63;89H~@k[42;3H[63;89H   [42;4H[63;103H3[42;4H[?12l[?25h[?25l[63;89H~@k[42;4H[63;89H   [42;5H[63;103H4[42;5H[?12l[?25h[?25l[63;89H~@k[42;5H[63;89H   [42;6H[63;103H5[42;6H[?12l[?25h[?25l[63;89H~@k[42;6H[63;89H   [42;7H[63;103H6[42;7H[?12l[?25h[?25l[63;89H~@k[42;7H[63;89H   [42;8H[63;103H7[42;8H[?12l[?25h[?25l[63;89H~@k[42;8H[63;89H   [42;9H[63;103H8[42;9H[?12l[?25h[?25l[63;89H~@k[42;9H[63;89H   [42;10H[63;103H9[42;10H[?12l[?25h[?25l[63;89H~@k[42;10H[63;89H   [42;11H[63;103H10[42;11H[?12l[?25h[?25l[63;89H~@k[42;11H[63;89H   [42;12H[63;104H1[42;12H[?12l[?25h[?25l[63;89H~@k[42;12H[63;89H   [42;13H[63;104H2[42;13H[?12l[?25h[?25l[63;89H~@k[42;13H[63;89H   [42;14H[63;104H3[42;14H[?12l[?25h[?25l[63;89H~@k[42;14H[63;89H   [42;15H[63;104H4[42;15H[?12l[?25h[?25l[63;89H~@k[42;15H[63;89H   [42;16H[63;104H5[42;16H[?12l[?25h[?25l[63;89H~@k[42;16H[63;89H   [42;17H[63;104H6[42;17H[?12l[?25h[?25l[63;89H~@k[42;17H[63;89H   [42;18H[63;104H7[42;18H[?12l[?25h[?25l[63;89H~@k[42;18H[63;89H   [42;19H[63;104H8[42;19H[?12l[?25h[?25l[63;89H~@k[42;19H[63;89H   [42;20H[63;104H9[42;20H[?12l[?25h[?25l[63;89H~@k[42;20H[63;89H   [42;21H[63;103H20[42;21H[?12l[?25h[?25l[63;89H~@k[42;21H[63;89H   [42;22H[63;104H1[42;22H[?12l[?25h[?25l[63;89H~@k[42;22H[63;89H   [42;23H[63;104H2[42;23H[?12l[?25h[?25l[63;89H~@k[42;23H[63;89H   [42;24H[63;104H3[42;24H[?12l[?25h[?25l[63;89H~@k[42;24H[63;89H   [42;25H[63;104H4[42;25H[?12l[?25h[?25l[63;89H~@k[42;25H[63;89H   [42;26H[63;104H5[42;26H[?12l[?25h[?25l[63;89H~@k[42;26H[63;89H   [42;27H[63;104H6[42;27H[?12l[?25h[?25l[63;89H~@k[42;27H[63;89H   [42;28H[63;104H7[42;28H[?12l[?25h[?25l[63;89H~@k[42;28H[63;89H   [42;29H[63;104H8[42;29H[?12l[?25h[?25l[63;89H~@k[42;29H[63;89H   [42;30H[63;104H9[42;30H[?12l[?25h[?25l[63;89H~@k[42;30H[63;89H   [42;31H[63;103H30[42;31H[?12l[?25h[?25l[63;89H~@k[42;31H[63;89H   [42;32H[63;104H1[42;32H[?12l[?25h[?25l[63;89H~@k[42;32H[63;89H   [42;33H[63;104H2[42;33H[?12l[?25h[?25l[63;89H~@k[42;33H[63;89H   [42;34H[63;104H3[42;34H[?12l[?25h[?25l[63;89H~@k[42;34H[63;89H   [42;35H[63;104H4[42;35H[?12l[?25h[?25l[63;89Hc[42;35H[?12l[?25h[?25l[63;90Hi[42;35H[?12l[?25h[?25l[63;90H [42;35H[63;90Hiw[42;35H[63;89H   [42;35H[63;1H[1m-- INSERT --[m[63;99H[K[63;99H118,34[8CTop[42;34H  not args:[42;45H[K[42;35H[?12l[?25h[?25l a not args:[63;104H5[42;36H[?12l[?25h[?25lan not args:[63;104H6[42;37H[?12l[?25h[?25lnd not args:[63;104H7[42;38H[?12l[?25h[63;1H[K[42;37H[?25l[63;89H^[[42;37H[?12l[?25h[?25l[63;89H  [42;38H[61;1H[K[63;99H118,36[8CTop[42;37H[?12l[?25h[?25l[63;89H:[42;37H[63;89H[K[61;1H:[?12l[?25hw[?25l[?12l[?25hq[?25l[?12l[?25h[?25l"./backup_ds.py" 159L, 5172C written[Pymode] Regenerate Rope cache ... [61;36H[K[61;10HInit Rope project: /home/pmalko/script/ds_bkp[61;10HCode checking is running ...[61;38H[K[61;27Hcompleted. No errors found.[61;10HFound errors and warnings: 0[61;38H[K[63;1H
[?1l>[?12l[?25h[?1049l]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ vim ./backup_ds.py ./backup_ds.py ds1-kha3 ds2-kha3
Password for DS:
Enter a for "After" or b for "Before"
: a b
Traceback (most recent call last):
  File "./backup_ds.py", line 147, in <module>
    print "Start running: {time}".format(time.strftime("%H:%m:%s"))
KeyError: 'time'
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ ./backup_ds.py ds1-kha3 ds2-kha3[13Pvim ./backup_ds.py 
[?1049h[?1h=[1;63r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[61;1H"./backup_ds.py" 159L, 5172C[>c[1;1H[34m[47m [m#!/usr/bin/env python2.6
[34m[47m [m# -*- coding: utf-8
[34m[47m 
 [mimport sys
[34m[47m [mimport threading
[34m[47m [mimport time
[34m[47m [mimport re
[34m[47m [mimport getpass
[34m[47m [mimport os
[34m[47m [mimport optparse
[34m[47m 
 [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/ecdsa-0.13-py2.6.egg/')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/requests-2.9.1-py2.6.egg')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg')
[34m[47m 
 [mimport paramiko
[34m[47m [mfrom paramiko import AuthenticationException
[34m[47m [mfrom socket import gaierror
[34m[47m [mfrom scp import SCPClient
[34m[47m [mfrom ds_helper import ds_print, RE, extract
[34m[47m 
 [mAUTHORISE_TRY_COUNT, \
[34m[47m [mCONNECT_TRY_INTERVAL = 5, 7
[34m[47m [mio_lock = threading.Lock
[34m[47m 
 
+0------------------------------------------------------------------------------------------------------------------[28;1H 
+0------------------------------------------------------------------------------------------------------------------[30;1H 
+0------------------------------------------------------------------------------------------------------------------[32;1H 
+0------------------------------------------------------------------------------------------------------------------[34;1H 
 [mparser = optparse.OptionParser(description='Get config from DS\'s and move them to 1.140',
[34m[47m [m[30C usage="usage: %prog [file with ds list]")
[34m[47m [mparser.add_option("-f", "--file", dest="ds_list_file_name",
[34m[47m [m[17C help="file with list DS", metavar="FILE")
[34m[47m [m#parser.add_option( help='Path to file with list of ds', required=True)
[34m[47m 
 [m(options, args) = parser.parse_args()
[34m[47m [mif not options.ds_list_file_name and not args:
[34m[47m [m    parser.error("Use [-f <ds list file> | ds ds ds ...]")
[34m[47m 
 [mds_list = args
[34m[47m [mif options.ds_list_file_name:
[34m[47m [m    try:
[34m[47m [m[7C with open(options.ds_list_file_name) as ds_list_file:
[34m[47m [m[11C for line in ds_list_file.readlines():
[34m[47m [m[15C ds_list.append(extract(RE.DS_NAME, line))
[34m[47m [m    except IOError as e:
[34m[47m [m[7C print "Error while open file: {file}".format(file=options.ds_list_file_name)
[34m[47m [m[7C print e.message
[34m[47m 
 [mif len(ds_list) < 1:
[34m[47m [m    print "No ds found in arguments."
[34m[47m [m    exit()
[34m[47m 
 [muser = getpass.getuser()
[34m[47m [msecret = getpass.getpass('Password for DS:')[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89H~@k[1;2H[63;89H   [2;2H[63;99H2[2;2H[?12l[?25h[?25l[63;89H~@k[2;2H[63;89H   [3;2H[63;99H3,0-1[3;2H[?12l[?25h[?25l[63;89H~@k[3;2H[63;89H   [4;2H[63;99H4,1  [4;2H[?12l[?25h[?25l[63;89H~@k[4;2H[63;89H   [5;2H[63;99H5[5;2H[?12l[?25h[?25l[63;89H~@k[5;2H[63;89H   [6;2H[63;99H6[6;2H[?12l[?25h[?25l[63;89H~@k[6;2H[63;89H   [7;2H[63;99H7[7;2H[?12l[?25h[?25l[63;89H~@k[7;2H[63;89H   [8;2H[63;99H8[8;2H[?12l[?25h[?25l[63;89H~@k[8;2H[63;89H   [9;2H[63;99H9[9;2H[?12l[?25h[?25l[63;89H~@k[9;2H[63;89H   [10;2H[63;99H10,1[10;2H[?12l[?25h[?25l[63;89H~@k[10;2H[63;89H   [11;2H[63;100H1,0-1[11;2H[?12l[?25h[?25l[63;89H~@k[11;2H[63;89H   [12;2H[63;100H2,1  [12;2H[?12l[?25h[?25l[63;89H~@k[12;2H[63;89H   [13;2H[63;100H3[13;2H[?12l[?25h[?25l[63;89H~@k[13;2H[63;89H   [14;2H[63;100H4[14;2H[?12l[?25h[?25l[63;89H~@k[14;2H[63;89H   [15;2H[63;100H5,0-1[15;2H[?12l[?25h[?25l[63;89H~@k[15;2H[63;89H   [16;2H[63;100H6,1  [16;2H[?12l[?25h[?25l[63;89H~@k[16;2H[63;89H   [17;2H[63;100H7[17;2H[?12l[?25h[?25l[63;89H~@k[17;2H[63;89H   [18;2H[63;100H8[18;2H[?12l[?25h[?25l[63;89H~@k[18;2H[63;89H   [19;2H[63;100H9[19;2H[?12l[?25h[?25l[63;89H~@k[19;2H[63;89H   [20;2H[63;99H20[20;2H[?12l[?25h[?25l[63;89H~@k[20;2H[63;89H   [21;2H[63;100H1,0-1[21;2H[?12l[?25h[?25l[63;89H~@k[21;2H[63;89H   [22;2H[63;100H2,1  [22;2H[?12l[?25h[?25l[63;89H~@k[22;2H[63;89H   [23;2H[63;100H3[23;2H[?12l[?25h[?25l[63;89H~@k[23;2H[63;89H   [24;2H[63;100H4[24;2H[?12l[?25h[?25l[63;89H~@k[24;2H[63;89H   [25;2H[63;100H5,0-1[25;2H[?12l[?25h[?25l[63;89H~@k[25;2H[63;89H   [26;2H[63;100H6[26;2H[?12l[?25h[?25l[63;89H~@k[26;2H[63;89H   [27;2H[63;100H7,1  [27;2H[?12l[?25h[?25l[63;89H~@k[27;2H[63;89H   [28;2H[63;99H60,0-1[28;2H[?12l[?25h[?25l[63;89H~@k[28;2H[63;89H   [29;2H[63;100H1,1  [29;2H[?12l[?25h[?25l[63;89H~@k[29;2H[63;89H   [30;2H[63;99H82,0-1[30;2H[?12l[?25h[?25l[63;89H~@k[30;2H[63;89H   [31;2H[63;100H3,1  [31;2H[?12l[?25h[?25l[63;89H~@k[31;2H[63;89H   [32;2H[63;99H103,0-1[32;2H[?12l[?25h[?25l[63;89H~@k[32;2H[63;89H   [33;2H[63;101H4,1  [33;2H[?12l[?25h[?25l[63;89H~@k[33;2H[63;89H   [34;2H[63;100H10,0-1[34;2H[?12l[?25h[?25l[63;89H~@k[34;2H[63;89H   [35;2H[63;101H1,1  [35;2H[?12l[?25h[?25l[63;89H~@k[35;2H[63;89H   [36;2H[63;101H2[36;2H[?12l[?25h[?25l[63;89H~@k[36;2H[63;89H   [37;2H[63;101H3[37;2H[?12l[?25h[?25l[63;89H~@k[37;2H[63;89H   [38;2H[63;101H4[38;2H[?12l[?25h[?25l[63;89H~@k[38;2H[63;89H   [39;2H[63;101H5[39;2H[?12l[?25h[?25l[63;89H~@k[39;2H[63;89H   [40;2H[63;101H6,0-1[40;2H[?12l[?25h[?25l[63;89H~@k[40;2H[63;89H   [41;2H[46m([13C)[m[63;101H7,1  [41;2H[?12l[?25h[?25l[63;89H~@k[41;2H[63;89H   [42;2H[41;2H([13C)[63;101H8[42;2H[?12l[?25h[?25l[63;89H~@k[42;2H[63;89H   [43;2H[63;101H9[43;2H[?12l[?25h[?25l[63;89H~@k[43;2H[63;89H   [44;2H[63;100H20,0-1[44;2H[?12l[?25h[?25l[63;89H~@k[44;2H[63;89H   [45;2H[63;101H1,1  [45;2H[?12l[?25h[?25l[63;89H~@k[45;2H[63;89H   [46;2H[63;101H2[46;2H[?12l[?25h[?25l[63;89H~@k[46;2H[63;89H   [47;2H[63;101H3[47;2H[?12l[?25h[?25l[63;89H~@k[47;2H[63;89H   [48;2H[63;101H4[48;2H[?12l[?25h[?25l[63;89H~@k[48;2H[63;89H   [49;2H[63;101H5[49;2H[?12l[?25h[?25l[63;89H~@k[49;2H[63;89H   [50;2H[63;101H6[50;2H[?12l[?25h[?25l[63;89H~@k[50;2H[63;89H   [51;2H[63;101H7[51;2H[?12l[?25h[?25l[63;89H~@k[51;2H[63;89H   [52;2H[63;101H8[52;2H[?12l[?25h[?25l[63;89H~@k[52;2H[63;89H   [53;2H[63;101H9[53;2H[?12l[?25h[?25l[63;89H~@k[53;2H[63;89H   [53;3H[63;103H2[53;3H[?12l[?25h[?25l[63;89H~@k[53;3H[63;89H   [53;4H[63;103H3[53;4H[?12l[?25h[?25l[63;89H~@k[53;4H[63;89H   [53;5H[63;103H4[53;5H[?12l[?25h[?25l[63;89H~@k[53;5H[63;89H   [53;6H[63;103H5[53;6H[?12l[?25h[?25l[63;89H~@k[53;6H[63;89H   [53;7H[63;103H6[53;7H[?12l[?25h[?25l[63;89H~@k[53;7H[63;89H   [53;8H[63;103H7[53;8H[?12l[?25h[?25l[63;89H~@k[53;8H[63;89H   [53;9H[63;103H8[53;9H[?12l[?25h[?25l[63;89H~@k[53;9H[63;89H   [53;10H[63;103H9[53;10H[?12l[?25h[?25l[63;89H~@k[53;10H[63;89H   [53;11H[63;103H10[53;11H[?12l[?25h[?25l[63;89H~@k[53;11H[63;89H   [53;12H[63;104H1[53;12H[?12l[?25h[?25l[63;89H~@k[53;12H[63;89H   [53;13H[63;104H2[53;13H[?12l[?25h[?25l[63;89H~@k[53;13H[63;89H   [53;14H[63;104H3[53;14H[?12l[?25h[?25l[63;89H~@k[53;14H[63;89H   [53;15H[63;104H4[53;15H[?12l[?25h[?25l[63;89H~@k[53;15H[63;89H   [53;16H[63;104H5[53;16H[?12l[?25h[?25l[63;89H~@k[53;16H[63;89H   [53;17H[63;104H6[53;17H[?12l[?25h[?25l[63;89H~@k[53;17H[63;89H   [53;18H[63;104H7[53;18H[?12l[?25h[?25l[63;89H~@k[53;18H[63;89H   [53;19H[63;104H8[53;19H[?12l[?25h[?25l[63;89H~@k[53;19H[63;89H   [53;20H[63;104H9[53;20H[?12l[?25h[?25l[63;89H~@k[53;20H[63;89H   [53;21H[63;103H20[53;21H[?12l[?25h[?25l[63;89H~@k[53;21H[63;89H   [53;22H[63;104H1[53;22H[?12l[?25h[?25l[63;89H~@k[53;22H[63;89H   [53;23H[63;104H2[53;23H[?12l[?25h[?25l[63;89H~@k[53;23H[63;89H   [53;24H[63;104H3[53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [52;24H[63;101H8[52;24H[?12l[?25h[?25l[63;89H~@k[52;24H[63;89H   [51;24H[63;101H7[51;24H[?12l[?25h[?25l[63;89H~@k[51;24H[63;89H   [50;24H[63;101H6[50;24H[?12l[?25h[?25l[63;89H~@k[50;24H[63;89H   [49;24H[63;101H5[49;24H[?12l[?25h[?25l[63;89H~@k[49;24H[63;89H   [48;24H[63;101H4[48;24H[?12l[?25h[?25l[63;89H~@k[48;24H[63;89H   [47;9H[63;101H3,8 [47;9H[?12l[?25h[?25l[63;89H~@k[47;9H[63;89H   [46;24H[63;101H2,23[46;24H[?12l[?25h[?25l[63;89H~@k[46;24H[63;89H   [45;15H[63;101H1,14[45;15H[?12l[?25h[?25l[63;89H~@k[45;15H[63;89H   [44;2H[63;101H0,0-1[44;2H[?12l[?25h[?25l[63;89H~@k[44;2H[63;89H   [43;24H[46m[[32C][m[63;100H19,23 [43;24H[?12l[?25h[?25l[63;89H~@k[43;24H[63;89H   [42;24H[43;24H[[32C][63;101H8[42;24H[?12l[?25h[?25l[63;89H~@k[42;24H[63;89H   [41;24H[63;101H7[41;24H[?12l[?25h[?25l[63;89H~@k[41;24H[63;89H   [40;2H[63;101H6,0-1[40;2H[?12l[?25h[?25l[63;89H~@k[40;2H[63;89H   [39;24H[63;101H5,23 [39;24H[?12l[?25h[?25l[63;89H~@k[39;24H[63;89H   [40;2H[63;101H6,0-1[40;2H[?12l[?25h[?25l[63;89H~@k[40;2H[63;89H   [41;24H[63;101H7,23 [41;24H[?12l[?25h[?25l[63;89H~@k[41;24H[63;89H   [42;24H[63;101H8[42;24H[?12l[?25h[?25l[63;89H~@k[42;24H[63;89H   [43;24H[46m[[32C][m[63;101H9[43;24H[?12l[?25h[?25l[63;89H~@k[43;24H[63;89H   [44;2H[43;24H[[32C][63;100H20,0-1[44;2H[?12l[?25h[?25l[63;89H~@k[44;2H[63;89H   [45;15H[63;101H1,14 [45;15H[?12l[?25h[?25l[63;89H~@k[45;15H[63;89H   [46;24H[63;101H2,23[46;24H[?12l[?25h[?25l[63;89H~@k[46;24H[63;89H   [47;9H[63;101H3,8 [47;9H[?12l[?25h[?25l[63;89H~@k[47;9H[63;89H   [48;24H[63;101H4,23[48;24H[?12l[?25h[?25l[63;89H~@k[48;24H[63;89H   [49;24H[63;101H5[49;24H[?12l[?25h[?25l[63;89H~@k[49;24H[63;89H   [50;24H[63;101H6[50;24H[?12l[?25h[?25l[63;89H~@k[50;24H[63;89H   [51;24H[63;101H7[51;24H[?12l[?25h[?25l[63;89H~@k[51;24H[63;89H   [52;24H[63;101H8[52;24H[?12l[?25h[?25l[63;89H~@k[52;24H[63;89H   [53;24H[63;101H9[53;24H[?12l[?25h[?25l[63;89H~@k[53;24H[63;89H   [54;2H[63;100H30,0-1[54;2H[?12l[?25h[?25l[63;89H~@k[54;2H[63;89H   [55;21H[63;101H1,20 [55;21H[?12l[?25h[?25l[63;89H~@k[55;21H[63;89H   [56;24H[63;101H2,23[56;24H[?12l[?25h[?25l[63;89H~@k[56;24H[63;89H   [57;11H[46m()[m[63;101H3,10[57;11H[?12l[?25h[?25l[63;89H~@k[57;11H[63;89H   [58;2H[57;10H()[63;101H4,0-1[58;2H[?12l[?25h[?25l[63;89H~@k[58;2H[63;89H   [59;24H[46m()[m[63;101H5,23 [59;24H[?12l[?25h[?25l[63;89H~@k[59;24H[63;89H   [60;24H[59;24H()[63;101H6[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[61;1H[K[63;99H[K[63;99H137,0-1[8C4%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;12H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mwhile True:[63;99H[K[63;99H138,11[9C8%[60;12H[?12l[?25h[?25l[63;89H~@k[60;12H[63;89H   [60;24H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    st = raw_input("Enter a for \"After\" or b for \"Before\"\n: ").lower()[63;99H[K[63;99H139,23[8C13%[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;24H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    if st == 'a' or st == 'b':[63;99H[K[63;99H140,23[8C17%[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;14H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C break[63;99H[K[63;99H141,13[8C21%[60;14H[?12l[?25h[?25l[63;89H~@k[60;14H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H142,0-1[7C26%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;24H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mname = time.strftime("%y%m%d_") + st + '_upgrade_'[63;99H[K[63;99H143,23[8C30%[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H144,0-1[7C34%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;24H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m#paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG)[63;99H[K[63;99H145,23[8C39%[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H146,0-1[7C43%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;24H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mprint "Start running: [46m{[mtime[46m}[m".format(time.strftime("%H:%m:%s"))[63;99H[K[63;99H147,23[8C47%[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;22H[1;60r[60;1H
[1;63r[59;24H{time}
[34m[47m [mif len(ds_list) == 1:[63;99H[K[63;99H148,21[8C52%[60;22H[?12l[?25h[?25l[63;89H~@k[60;22H[63;89H   [59;24H[46m{[mtime[46m}[m[63;101H7,23[59;24H[?12l[?25h[?25l[63;89H~@k[59;24H[63;89H   [58;2H[59;24H{time}[63;101H6,0-1[58;2H[?12l[?25h[?25l[63;89H~@k[58;2H[63;89H   [57;24H[63;101H5,23 [57;24H[?12l[?25h[?25l[63;89H~@k[57;24H[63;89H   [56;2H[63;101H4,0-1[56;2H[?12l[?25h[?25l[63;89H~@k[56;2H[63;89H   [57;24H[63;101H5,23 [57;24H[?12l[?25h[?25l[63;89H~@k[57;24H[63;89H   [58;2H[63;101H6,0-1[58;2H[?12l[?25h[?25l[63;89H~@k[58;2H[63;89H   [59;24H[46m{[mtime[46m}[m[63;101H7,23 [59;24H[?12l[?25h[?25l[63;89H~@k[59;24H[63;89H   [60;22H[59;24H{time}[63;101H8,21[60;22H[?12l[?25h[?25l[63;89H~@k[60;22H[63;89H   [60;24H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    copy_ds_backup(ds_list[0], user, secret, name)[63;99H[K[63;99H149,23[8C56%[60;24H[?12l[?25h[?25l[63;89H~@k[60;24H[63;89H   [60;6H[1;60r[60;1H
[1;63r[60;1H[34m[47m [melse:[63;99H[K[63;99H150,5[9C60%[60;6H[?12l[?25h[?25l[63;89H~@k[60;6H[63;89H   [59;24H[63;100H49,23[59;24H[?12l[?25h[?25l[63;89H~@k[59;24H[63;89H   [58;22H[63;101H8,21[58;22H[?12l[?25h[?25l[63;89H~@k[58;22H[63;89H   [57;24H[46m{[mtime[46m}[m[63;101H7,23[57;24H[?12l[?25h[?25l[63;89H~@k[57;24H[63;89H   [57;25H{time}[63;104H4[57;25H[?12l[?25h[?25l[63;89H~@k[57;25H[63;89H   [57;26H[63;104H5[57;26H[?12l[?25h[?25l[63;89H~@k[57;26H[63;89H   [57;27H[63;104H6[57;27H[?12l[?25h[?25l[63;89H~@k[57;27H[63;89H   [57;28H[63;104H7[57;28H[?12l[?25h[?25l[63;89H~@k[57;28H[63;89H   [57;29H[46m{[mtime[46m}[m[63;104H8[57;29H[?12l[?25h[?25l[63;89H~@k[57;29H[63;89H   [57;30H{time}[63;104H9[57;30H[?12l[?25h[?25l[63;89H~@k[57;30H[63;89H   [57;31H[63;103H30[57;31H[?12l[?25h[?25l[63;89H~@k[57;31H[63;89H   [57;32H[63;104H1[57;32H[?12l[?25h[?25l[63;89H~@k[57;32H[63;89H   [57;33H[63;104H2[57;33H[?12l[?25h[?25l[63;89H~@k[57;33H[63;89H   [57;34H[63;104H3[57;34H[?12l[?25h[?25l[63;89H~@k[57;34H[63;89H   [57;35H[63;104H4[57;35H[?12l[?25h[?25l[63;89H~@k[57;35H[63;89H   [57;36H[63;104H5[57;36H[?12l[?25h[?25l[63;89H~@k[57;36H[63;89H   [57;37H[63;104H6[57;37H[?12l[?25h[?25l[63;89H~@k[57;37H[63;89H   [57;38H[46m([25C)[m[63;104H7[57;38H[?12l[?25h[?25l[63;89H~@k[57;38H[63;89H   [57;39H([25C)[63;104H8[57;39H[?12l[?25h[?25l[63;89H~@k[57;39H[63;89H   [57;39H[63;1H[1m-- INSERT --[m[63;99H[K[63;99H147,38[8C60%[57;39H[?12l[?25h[?25l(ytime.strftime("%H:%m:%s"))[63;104H9[57;40H[?12l[?25h[?25l[46m([mtime.strftime("%H:%m:%s")[46m)[m[57;65H[K[63;104H8[57;39H[?12l[?25h[?25l(ttime.strftime("%H:%m:%s"))[63;104H9[57;40H[?12l[?25h[?25ltitime.strftime("%H:%m:%s"))[63;103H40[57;41H[?12l[?25h[?25limtime.strftime("%H:%m:%s"))[63;104H1[57;42H[?12l[?25h[?25lmetime.strftime("%H:%m:%s"))[63;104H2[57;43H[?12l[?25h[?25le=time.strftime("%H:%m:%s"))[63;104H3[57;44H[?12l[?25h[63;1H[K[57;43H[?25l[63;89H^[[57;43H[?12l[?25h[?25l[63;89H  [57;44H[63;99H147,42[8C60%[57;43H[?12l[?25h[?25l[63;89H:[57;43H[63;89H[K[61;1H:[?12l[?25hw[?25l[?12l[?25hq[?25l[?12l[?25h[?25l"./backup_ds.py" 159L, 5177C written[Pymode] Regenerate Rope cache ... [61;36H[K[61;10HInit Rope project: /home/pmalko/script/ds_bkp[61;10HCode checking is running ...[61;38H[K[61;27Hcompleted. No errors found.[61;10HFound errors and warnings: 0[61;38H[K[63;1H
[?1l>[?12l[?25h[?1049l]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ :vim ./backup_ds.py 
[?1049h[?1h=[1;63r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[61;1H"./backup_ds.py" 159L, 5177C[>c[1;1H[34m[47m [m#!/usr/bin/env python2.6
[34m[47m [m# -*- coding: utf-8
[34m[47m 
 [mimport sys
[34m[47m [mimport threading
[34m[47m [mimport time
[34m[47m [mimport re
[34m[47m [mimport getpass
[34m[47m [mimport os
[34m[47m [mimport optparse
[34m[47m 
 [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/ecdsa-0.13-py2.6.egg/')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/requests-2.9.1-py2.6.egg')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg')
[34m[47m 
 [mimport paramiko
[34m[47m [mfrom paramiko import AuthenticationException
[34m[47m [mfrom socket import gaierror
[34m[47m [mfrom scp import SCPClient
[34m[47m [mfrom ds_helper import ds_print, RE, extract
[34m[47m 
 [mAUTHORISE_TRY_COUNT, \
[34m[47m [mCONNECT_TRY_INTERVAL = 5, 7
[34m[47m [mio_lock = threading.Lock
[34m[47m 
 
+0------------------------------------------------------------------------------------------------------------------[28;1H 
+0------------------------------------------------------------------------------------------------------------------[30;1H 
+0------------------------------------------------------------------------------------------------------------------[32;1H 
+0------------------------------------------------------------------------------------------------------------------[34;1H 
 [mparser = optparse.OptionParser(description='Get config from DS\'s and move them to 1.140',
[34m[47m [m[30C usage="usage: %prog [file with ds list]")
[34m[47m [mparser.add_option("-f", "--file", dest="ds_list_file_name",
[34m[47m [m[17C help="file with list DS", metavar="FILE")
[34m[47m [m#parser.add_option( help='Path to file with list of ds', required=True)
[34m[47m 
 [m(options, args) = parser.parse_args()
[34m[47m [mif not options.ds_list_file_name and not args:
[34m[47m [m    parser.error("Use [-f <ds list file> | ds ds ds ...]")
[34m[47m 
 [mds_list = args
[34m[47m [mif options.ds_list_file_name:
[34m[47m [m    try:
[34m[47m [m[7C with open(options.ds_list_file_name) as ds_list_file:
[34m[47m [m[11C for line in ds_list_file.readlines():
[34m[47m [m[15C ds_list.append(extract(RE.DS_NAME, line))
[34m[47m [m    except IOError as e:
[34m[47m [m[7C print "Error while open file: {file}".format(file=options.ds_list_file_name)
[34m[47m [m[7C print e.message
[34m[47m 
 [mif len(ds_list) < 1:
[34m[47m [m    print "No ds found in arguments."
[34m[47m [m    exit()
[34m[47m 
 [muser = getpass.getuser()
[34m[47m [msecret = getpass.getpass('Password for DS:')[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89H~@k[1;2H[63;89H   [2;2H[63;99H2[2;2H[?12l[?25h[?25l[63;89H~@k[2;2H[63;89H   [3;2H[63;99H3,0-1[3;2H[?12l[?25h[?25l[63;89H~@k[3;2H[63;89H   [4;2H[63;99H4,1  [4;2H[?12l[?25h[?25l[63;89H~@k[4;2H[63;89H   [5;2H[63;99H5[5;2H[?12l[?25h[?25l[63;89H~@k[5;2H[63;89H   [6;2H[63;99H6[6;2H[?12l[?25h[?25l[63;89H~@k[6;2H[63;89H   [7;2H[63;99H7[7;2H[?12l[?25h[?25l[63;89H~@k[7;2H[63;89H   [8;2H[63;99H8[8;2H[?12l[?25h[?25l[63;89H~@k[8;2H[63;89H   [9;2H[63;99H9[9;2H[?12l[?25h[?25l[63;89H~@k[9;2H[63;89H   [10;2H[63;99H10,1[10;2H[?12l[?25h[?25l[63;89H~@k[10;2H[63;89H   [11;2H[63;100H1,0-1[11;2H[?12l[?25h[?25l[63;89H~@k[11;2H[63;89H   [12;2H[63;100H2,1  [12;2H[?12l[?25h[?25l[63;89H~@k[12;2H[63;89H   [13;2H[63;100H3[13;2H[?12l[?25h[?25l[63;89H~@k[13;2H[63;89H   [14;2H[63;100H4[14;2H[?12l[?25h[?25l[63;89H~@k[14;2H[63;89H   [15;2H[63;100H5,0-1[15;2H[?12l[?25h[?25l[63;89H~@k[15;2H[63;89H   [16;2H[63;100H6,1  [16;2H[?12l[?25h[?25l[63;89H~@k[16;2H[63;89H   [17;2H[63;100H7[17;2H[?12l[?25h[?25l[63;89H~@k[17;2H[63;89H   [18;2H[63;100H8[18;2H[?12l[?25h[?25l[63;89H~@k[18;2H[63;89H   [19;2H[63;100H9[19;2H[?12l[?25h[?25l[63;89H~@k[19;2H[63;89H   [20;2H[63;99H20[20;2H[?12l[?25h[?25l[63;89H~@k[20;2H[63;89H   [21;2H[63;100H1,0-1[21;2H[?12l[?25h[?25l[63;89H~@k[21;2H[63;89H   [22;2H[63;100H2,1  [22;2H[?12l[?25h[?25l[63;89H~@k[22;2H[63;89H   [23;2H[63;100H3[23;2H[?12l[?25h[?25l[63;89H~@k[23;2H[63;89H   [24;2H[63;100H4[24;2H[?12l[?25h[?25l[63;89H~@k[24;2H[63;89H   [25;2H[63;100H5,0-1[25;2H[?12l[?25h[?25l[63;89H~@k[25;2H[63;89H   [26;2H[63;100H6[26;2H[?12l[?25h[?25l[63;89H~@k[26;2H[63;89H   [27;2H[63;100H7,1  [27;2H[?12l[?25h[?25l[63;89H~@k[27;2H[63;89H   [28;2H[63;99H60,0-1[28;2H[?12l[?25h[?25l[63;89H~@k[28;2H[63;89H   [29;2H[63;100H1,1  [29;2H[?12l[?25h[?25l[63;89H~@k[29;2H[63;89H   [30;2H[63;99H82,0-1[30;2H[?12l[?25h[?25l[63;89H~@k[30;2H[63;89H   [31;2H[63;100H3,1  [31;2H[?12l[?25h[?25l[63;89H~@k[31;2H[63;89H   [32;2H[63;99H103,0-1[32;2H[?12l[?25h[?25l[63;89H~@k[32;2H[63;89H   [33;2H[63;101H4,1  [33;2H[?12l[?25h[?25l[63;89H~@k[33;2H[63;89H   [34;2H[63;100H10,0-1[34;2H[?12l[?25h[?25l[63;89H~@k[34;2H[63;89H   [35;2H[63;101H1,1  [35;2H[?12l[?25h[?25l[63;89H~@k[35;2H[63;89H   [36;2H[63;101H2[36;2H[?12l[?25h[?25l[63;89H~@k[36;2H[63;89H   [37;2H[63;101H3[37;2H[?12l[?25h[?25l[63;89H~@k[37;2H[63;89H   [38;2H[63;101H4[38;2H[?12l[?25h[?25l[63;89H~@k[38;2H[63;89H   [39;2H[63;101H5[39;2H[?12l[?25h[?25l[63;89H~@k[39;2H[63;89H   [40;2H[63;101H6,0-1[40;2H[?12l[?25h[?25l[63;89H~@k[40;2H[63;89H   [41;2H[46m([13C)[m[63;101H7,1  [41;2H[?12l[?25h[?25l[63;89H~@k[41;2H[63;89H   [42;2H[41;2H([13C)[63;101H8[42;2H[?12l[?25h[?25l[63;89H~@k[42;2H[63;89H   [43;2H[63;101H9[43;2H[?12l[?25h[?25l[63;89H~@k[43;2H[63;89H   [44;2H[63;100H20,0-1[44;2H[?12l[?25h[?25l[63;89H~@k[44;2H[63;89H   [45;2H[63;101H1,1  [45;2H[?12l[?25h[?25l[63;89H~@k[45;2H[63;89H   [46;2H[63;101H2[46;2H[?12l[?25h[?25l[63;89H~@k[46;2H[63;89H   [47;2H[63;101H3[47;2H[?12l[?25h[?25l[63;89H~@k[47;2H[63;89H   [48;2H[63;101H4[48;2H[?12l[?25h[?25l[63;89H~@k[48;2H[63;89H   [49;2H[63;101H5[49;2H[?12l[?25h[?25l[63;89H~@k[49;2H[63;89H   [50;2H[63;101H6[50;2H[?12l[?25h[?25l[63;89H~@k[50;2H[63;89H   [51;2H[63;101H7[51;2H[?12l[?25h[?25l[63;89H~@k[51;2H[63;89H   [52;2H[63;101H8[52;2H[?12l[?25h[?25l[63;89H~@k[52;2H[63;89H   [53;2H[63;101H9[53;2H[?12l[?25h[?25l[63;89H~@k[53;2H[63;89H   [54;2H[63;100H30,0-1[54;2H[?12l[?25h[?25l[63;89H~@k[54;2H[63;89H   [55;2H[63;101H1,1  [55;2H[?12l[?25h[?25l[63;89H~@k[55;2H[63;89H   [56;2H[63;101H2[56;2H[?12l[?25h[?25l[63;89H~@k[56;2H[63;89H   [57;2H[63;101H3[57;2H[?12l[?25h[?25l[63;89H~@k[57;2H[63;89H   [58;2H[63;101H4,0-1[58;2H[?12l[?25h[?25l[63;89H~@k[58;2H[63;89H   [59;2H[63;101H5,1  [59;2H[?12l[?25h[?25l[63;89H~@k[59;2H[63;89H   [60;2H[63;101H6[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[61;1H[K[63;99H[K[63;99H137,0-1[8C4%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mwhile True:[63;99H[K[63;99H138,1[10C8%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    st = raw_input("Enter a for \"After\" or b for \"Before\"\n: ").lower()[63;99H[K[63;99H139,1[9C13%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    if st == 'a' or st == 'b':[63;99H[K[63;99H140,1[9C17%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C break[63;99H[K[63;99H141,1[9C21%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H142,0-1[7C26%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mname = time.strftime("%y%m%d_") + st + '_upgrade_'[63;99H[K[63;99H143,1[9C30%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H144,0-1[7C34%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m#paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG)[63;99H[K[63;99H145,1[9C39%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H146,0-1[7C43%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mprint "Start running: {time}".format(time=time.strftime("%H:%m:%s"))[63;99H[K[63;99H147,1[9C47%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mif len(ds_list) == 1:[63;99H[K[63;99H148,1[9C52%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    copy_ds_backup(ds_list[0], user, secret, name)[63;99H[K[63;99H149,1[9C56%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [melse:[63;99H[K[63;99H150,1[9C60%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    threads = list()[63;99H[K[63;99H151,1[9C65%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    for ds in ds_list:[63;99H[K[63;99H152,1[9C69%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C thread = threading.Thread(target=copy_ds_backup, name=ds, args=(ds, user, secret, name))[63;99H[K[63;99H153,1[9C73%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C thread.start()[63;99H[K[63;99H154,1[9C78%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C threads.appent(thread)[63;99H[K[63;99H155,1[9C82%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H156,0-1[7C86%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    for thread in threads:[63;99H[K[63;99H157,1[9C91%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C thread.join()[63;99H[K[63;99H158,1[9C95%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [mprint "Finish running: {time}".format(time.strftime("%H:%m:%s"))[63;99H[K[63;99H159,1[9CBot[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [59;2H[63;101H8[59;2H[?12l[?25h[?25l[63;89H~@k[59;2H[63;89H   [58;2H[63;101H7[58;2H[?12l[?25h[?25l[63;89H~@k[58;2H[63;89H   [57;2H[63;101H6,0-1[57;2H[?12l[?25h[?25l[63;89H~@k[57;2H[63;89H   [58;2H[63;101H7,1  [58;2H[?12l[?25h[?25l[63;89H~@k[58;2H[63;89H   [59;2H[63;101H8[59;2H[?12l[?25h[?25l[63;89H~@k[59;2H[63;89H   [60;2H[63;101H9[60;2H[?12l[?25h[?25l[63;89H~@K[60;2H[63;89H   [60;65H[60;39H[46m([25C)[m[63;103H64[60;65H[?12l[?25h[?25l[63;89H~@k[60;65H[63;89H   [60;64H[60;39H([13C[46m([10C)[m)[63;104H3[60;64H[?12l[?25h[?25l[63;89H~@k[60;64H[63;89H   [60;63H[60;53H([10C)[63;104H2[60;63H[?12l[?25h[?25l[63;89H~@k[60;63H[63;89H   [60;62H[63;104H1[60;62H[?12l[?25h[?25l[63;89H~@k[60;62H[63;89H   [60;61H[63;104H0[60;61H[?12l[?25h[?25l[63;89H~@k[60;61H[63;89H   [60;60H[63;103H59[60;60H[?12l[?25h[?25l[63;89H~@k[60;60H[63;89H   [60;59H[63;104H8[60;59H[?12l[?25h[?25l[63;89H~@k[60;59H[63;89H   [60;58H[63;104H7[60;58H[?12l[?25h[?25l[63;89H~@k[60;58H[63;89H   [60;57H[63;104H6[60;57H[?12l[?25h[?25l[63;89H~@k[60;57H[63;89H   [60;56H[63;104H5[60;56H[?12l[?25h[?25l[63;89H~@k[60;56H[63;89H   [60;55H[63;104H4[60;55H[?12l[?25h[?25l[63;89H~@k[60;55H[63;89H   [60;54H[63;104H3[60;54H[?12l[?25h[?25l[63;89H~@k[60;54H[63;89H   [60;53H[46m([10C)[m[63;104H2[60;53H[?12l[?25h[?25l[63;89H~@k[60;53H[63;89H   [60;52He([10C)[63;104H1[60;52H[?12l[?25h[?25l[63;89H~@k[60;52H[63;89H   [60;51H[63;104H0[60;51H[?12l[?25h[?25l[63;89H~@k[60;51H[63;89H   [60;50H[63;103H49[60;50H[?12l[?25h[?25l[63;89H~@k[60;50H[63;89H   [60;49H[63;104H8[60;49H[?12l[?25h[?25l[63;89H~@k[60;49H[63;89H   [60;48H[63;104H7[60;48H[?12l[?25h[?25l[63;89H~@k[60;48H[63;89H   [60;47H[63;104H6[60;47H[?12l[?25h[?25l[63;89H~@k[60;47H[63;89H   [60;46H[63;104H5[60;46H[?12l[?25h[?25l[63;89H~@k[60;46H[63;89H   [60;45H[63;104H4[60;45H[?12l[?25h[?25l[63;89H~@k[60;45H[63;89H   [60;44H[63;104H3[60;44H[?12l[?25h[?25l[63;89H~@k[60;44H[63;89H   [60;43H[63;104H2[60;43H[?12l[?25h[?25l[63;89H~@k[60;43H[63;89H   [60;42H[63;104H1[60;42H[?12l[?25h[?25l[63;89H~@k[60;42H[63;89H   [60;41H[63;104H0[60;41H[?12l[?25h[?25l[63;89H~@k[60;41H[63;89H   [60;40H[63;103H39[60;40H[?12l[?25h[?25l[63;89Hi[60;40H[63;89H [60;40H


[1m-- INSERT --[m[63;99H[K[63;99H159,39[8CBot[60;40H[?12l[?25h[?25lttime.strftime("%H:%m:%s"))[63;103H40[60;41H[?12l[?25h[?25ltitime.strftime("%H:%m:%s"))[63;104H1[60;42H[?12l[?25h[?25limtime.strftime("%H:%m:%s"))[63;104H2[60;43H[?12l[?25h[?25lmetime.strftime("%H:%m:%s"))[63;104H3[60;44H[?12l[?25h[?25le=time.strftime("%H:%m:%s"))[63;104H4[60;45H[?12l[?25h[63;1H[K[60;44H[?25l[63;89H^[[60;44H[?12l[?25h[?25l[63;89H  [60;45H[63;99H159,43[8CBot[60;44H[?12l[?25h[?25l[63;89H:[60;44H[63;89H[K[61;1H:[?12l[?25hw[?25l[?12l[?25hq[?25l[?12l[?25h[?25l"./backup_ds.py" 159L, 5182C written[Pymode] Regenerate Rope cache ... [61;36H[K[61;10HInit Rope project: /home/pmalko/script/ds_bkp[61;10HCode checking is running ...[61;38H[K[61;27Hcompleted. No errors found.[61;10HFound errors and warnings: 0[61;38H[K[63;1H
[?1l>[?12l[?25h[?1049l]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ vim ./backup_ds.py ./backup_ds.py ds1-kha3 ds2-kha3
Password for DS:
Enter a for "After" or b for "Before"
: b
Start running: 11:12:1482746145
Traceback (most recent call last):
  File "./backup_ds.py", line 155, in <module>
    threads.appent(thread)
AttributeError: 'list' object has no attribute 'appent'





^C
^C
^Z
[1]+  Stopped                 ./backup_ds.py ds1-kha3 ds2-kha3
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ ./backup_ds.py ds1-kha3 ds2-kha3[13Pvim ./backup_ds.py 
[?1049h[?1h=[1;63r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[61;1H"./backup_ds.py" 159L, 5182C[>c[1;1H[34m[47m [m#!/usr/bin/env python2.6
[34m[47m [m# -*- coding: utf-8
[34m[47m 
 [mimport sys
[34m[47m [mimport threading
[34m[47m [mimport time
[34m[47m [mimport re
[34m[47m [mimport getpass
[34m[47m [mimport os
[34m[47m [mimport optparse
[34m[47m 
 [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/ecdsa-0.13-py2.6.egg/')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/requests-2.9.1-py2.6.egg')
[34m[47m [msys.path.insert(1, '/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg')
[34m[47m 
 [mimport paramiko
[34m[47m [mfrom paramiko import AuthenticationException
[34m[47m [mfrom socket import gaierror
[34m[47m [mfrom scp import SCPClient
[34m[47m [mfrom ds_helper import ds_print, RE, extract
[34m[47m 
 [mAUTHORISE_TRY_COUNT, \
[34m[47m [mCONNECT_TRY_INTERVAL = 5, 7
[34m[47m [mio_lock = threading.Lock
[34m[47m 
 
+0------------------------------------------------------------------------------------------------------------------[28;1H 
+0------------------------------------------------------------------------------------------------------------------[30;1H 
+0------------------------------------------------------------------------------------------------------------------[32;1H 
+0------------------------------------------------------------------------------------------------------------------[34;1H 
 [mparser = optparse.OptionParser(description='Get config from DS\'s and move them to 1.140',
[34m[47m [m[30C usage="usage: %prog [file with ds list]")
[34m[47m [mparser.add_option("-f", "--file", dest="ds_list_file_name",
[34m[47m [m[17C help="file with list DS", metavar="FILE")
[34m[47m [m#parser.add_option( help='Path to file with list of ds', required=True)
[34m[47m 
 [m(options, args) = parser.parse_args()
[34m[47m [mif not options.ds_list_file_name and not args:
[34m[47m [m    parser.error("Use [-f <ds list file> | ds ds ds ...]")
[34m[47m 
 [mds_list = args
[34m[47m [mif options.ds_list_file_name:
[34m[47m [m    try:
[34m[47m [m[7C with open(options.ds_list_file_name) as ds_list_file:
[34m[47m [m[11C for line in ds_list_file.readlines():
[34m[47m [m[15C ds_list.append(extract(RE.DS_NAME, line))
[34m[47m [m    except IOError as e:
[34m[47m [m[7C print "Error while open file: {file}".format(file=options.ds_list_file_name)
[34m[47m [m[7C print e.message
[34m[47m 
 [mif len(ds_list) < 1:
[34m[47m [m    print "No ds found in arguments."
[34m[47m [m    exit()
[34m[47m 
 [muser = getpass.getuser()
[34m[47m [msecret = getpass.getpass('Password for DS:')[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89H/[1;2H[61;1H[K[63;89H[K[61;1H/[?12l[?25ha[?25l[5;13H[7ma[m[63;99H5,12[10CTop[63;99H[K[61;3H[?12l[?25hp[?25l[5;13Ha[50;26H[7map[m[63;99H126,25[8CTop[63;99H[K[61;4H[?12l[?25hp[?25l[50;28H[7mp[m[63;99H126,25[8CTop[63;99H[K[61;5H[?12l[?25he[?25l[50;29H[7me[m[63;99H126,25[8CTop[63;99H[K[61;6H[?12l[?25hn[?25l[50;30H[7mn[m[63;99H126,25[8CTop[63;99H[K[61;7H[?12l[?25ht[?25l[1;60r[1;1H[19M[1;63r[31;26Happen[42;1H[34m[47m 
 [mwhile True:
[34m[47m [m    st = raw_input("Enter a for \"After\" or b for \"Before\"\n: ").lower()
[34m[47m [m    if st == 'a' or st == 'b':
[34m[47m [m[7C break
[34m[47m 
 [mname = time.strftime("%y%m%d_") + st + '_upgrade_'
[34m[47m 
 [m#paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG)
[34m[47m 
 [mprint "Start running: {time}".format(time=time.strftime("%H:%m:%s"))
[34m[47m [mif len(ds_list) == 1:
[34m[47m [m    copy_ds_backup(ds_list[0], user, secret, name)
[34m[47m [melse:
[34m[47m [m    threads = list()
[34m[47m [m    for ds in ds_list:
[34m[47m [m[7C thread = threading.Thread(target=copy_ds_backup, name=ds, args=(ds, user, secret, name))
[34m[47m [m[7C thread.start()
[34m[47m [m[7C threads.[7mappent[m(thread)[61;1H[K[63;99H155,17[8C82%[61;1H/appent[63;99H[K[61;8H[?12l[?25h[?25l[60;18H[30m[43mappent[m[63;99H155,17[8C82%[60;18H[?12l[?25h[?25l[63;89Hi[60;18H[63;89H [60;18H


[1m-- INSERT --[m[63;99H[K[63;99H155,17[8C82%[60;18H[?12l[?25h[?25l[63;104H8[60;19H[?12l[?25h[?25l[63;104H9[60;20H[?12l[?25h[?25l[63;103H20[60;21H[?12l[?25h[?25l[63;104H1[60;22H[?12l[?25h[?25l[63;104H2[60;23H[?12l[?25h[?25l[1C[46m([mthread[46m)[m[63;104H3[60;24H[?12l[?25h[?25lappen[46m([mthread[46m)[m[60;31H[K[63;104H2[60;23H[?12l[?25h[?25lnd[46m([mthread[46m)[m[63;104H3[60;24H[?12l[?25h[63;1H[K[60;23H[?25l[63;89H^[[60;23H[?12l[?25h[?25l[63;89H  [60;24H[61;1H[K[60;24H(thread)[63;99H155,22[8C82%[60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [60;2H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[63;99H[K[63;99H156,0-1[7C86%[60;2H[?12l[?25h[?25l[63;89H~@k[60;2H[63;89H   [60;23H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m    for thread in threads:[63;99H[K[63;99H157,22[8C91%[60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [60;22H[1;60r[60;1H
[1;63r[60;1H[34m[47m [m[7C thread.join[46m()[m[63;99H[K[63;99H158,21[8C95%[60;22H[?12l[?25h[?25l[63;89H~@k[60;22H[63;89H   [60;23H[1;60r[60;1H
[1;63r[59;21H()
[34m[47m [mprint "Finish running: {time}".format(time=time.strftime("%H:%m:%s"))[63;99H[K[63;99H159,22[8CBot[60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [60;23H[?12l[?25h[?25l[63;89H~@k[60;23H[63;89H   [59;22H[46m()[m[63;101H8,21[59;22H[?12l[?25h[?25l[63;89H~@k[59;22H[63;89H   [58;23H[59;21H()[63;101H7,22[58;23H[?12l[?25h[?25l[63;89H~@k[58;23H[63;89H   [57;2H[63;101H6,0-1[57;2H[?12l[?25h[?25l[63;89H:[57;2H[63;89H[K[61;1H:[?12l[?25hw[?25l[?12l[?25hq[?25l[?12l[?25h[?25l"./backup_ds.py" 159L, 5182C written[Pymode] Regenerate Rope cache ... [61;36H[K[61;10HInit Rope project: /home/pmalko/script/ds_bkp[61;10HCode checking is running ...[61;38H[K[61;27Hcompleted. No errors found.[61;10HFound errors and warnings: 0[61;38H[K[63;1H
[?1l>[?12l[?25h[?1049l]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ vim ./backup_ds.py [Kjo
-bash: jo: command not found
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ jobs
[1]+  Stopped                 ./backup_ds.py ds1-kha3 ds2-kha3
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ fg
./backup_ds.py ds1-kha3 ds2-kha3
Exception in thread ds1-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 39, in get_file_name
    ds_print(ds, "*** SSH establish with ")
  File "/home/pmalko/script/ds_bkp/ds_helper.py", line 79, in ds_print
    threading.RLock().__class__.__name__])
AssertionError

Exception KeyboardInterrupt in <module 'threading' from '/usr/lib/python2.6/threading.pyc'> ignored
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ fgjobs[Kvim ./backup_ds.py [K[K[K[K[K[K[K[K[K[K[K[K[Kds_helper.py
[?1049h[?1h=[1;63r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[61;1H"./ds_helper.py" 170L, 5655C[>c[1;1H[34m[47m [m#!/usr/bin/env python2.6
[34m[47m [m# -*- coding: utf-8
[34m[47m [mimport re
[34m[47m [mimport threading
[34m[47m 
 
+0------------------------------------------------------------------------------------------------------------------[8;1H 
+0------------------------------------------------------------------------------------------------------------------[10;1H 
+0------------------------------------------------------------------------------------------------------------------[12;1H 
+0------------------------------------------------------------------------------------------------------------------[14;1H 
 [mif __name__ == "__main__":
[34m[47m 
 [m    sample_text = """A:ds3-kha3# show version
[34m[47m [mTiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210 Copyright (c) 2000-2015 Alcatel-Lucent.
[34m[47m [mAll rights reserved. All use subject to applicable license agreements.
[34m[47m [mBuilt on Thu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main
[34m[47m [mA:ds3-kha3# shov [34m^[[m[1D [34m^[[m[1D[34m^[[m[1D [34m^[[m[1Dwp[34m^[[m[1D [34m^[[m[1D bof
[34m[47m [m===============================================================================
[34m[47m [mBOF (Memory)
[34m[47m [m===============================================================================
[34m[47m [m    primary-image      cf1:\images\TiMOS-7.0.R9\both.tim
[34m[47m [m    secondary-image    cf1:\images\TiMOS-B-4.0.R2\both.tim
[34m[47m [m    primary-config     cf1:\ds3-kha3.cfg
[34m[47m [m#eth-mgmt Port Settings:
[34m[47m [m    no  eth-mgmt-disabled
[34m[47m [m    eth-mgmt-address   10.50.70.46/24 active
[34m[47m [m    eth-mgmt-route     10.44.1.219/32 next-hop 10.50.70.1
[34m[47m [m    eth-mgmt-autoneg
[34m[47m [m    eth-mgmt-duplex    full
[34m[47m [m    eth-mgmt-speed     100
[34m[47m [m#uplinkA Port Settings:
[34m[47m [m    uplinkA-port       1/1/7
[34m[47m [m    uplinkA-autoneg
[34m[47m [m    uplinkA-duplex     full
[34m[47m [m    uplinkA-speed      1000
[34m[47m [m    uplinkA-address    0
[34m[47m [m    uplinkA-vlan       0
[34m[47m [m#uplinkB Port Settings:
[34m[47m [m    uplinkB-port       1/1/2
[34m[47m [m    uplinkB-autoneg
[34m[47m [m    uplinkB-duplex     full
[34m[47m [m    uplinkB-speed      1000
[34m[47m [m    uplinkB-address    0
[34m[47m [m    uplinkB-vlan       0
[34m[47m [m#System Settings:
[34m[47m [m    wait[14C 3
[34m[47m [m    persist[11C on
[34m[47m [m    console-speed      115200
[34m[47m [m    uplink-mode[7C network
[34m[47m [m    use-expansion-card-type   m2-xfp
[34m[47m [m    no  console-disabled
[34m[47m [m===============================================================================
[34m[47m [mA:ds3-kha3# file version cf1:\images\TiMOS-7.0.R9\both.tim
[34m[47m [mTiMOS-B-7.0.R9 for 7210 SAS-M
[34m[47m [mThu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main
[34m[47m [mA:ds3-kha3# file version boot.tim[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89H:[1;2H[61;1H[K[63;89H[K[61;1H:[?12l[?25h[?25l[61;1H[K[1;2H[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;1H[1m-- INSERT --[m[63;99H[K[63;99H1,1[11CTop[2;60r[2;1H[L[1;63r[1;1H[34m[47m [mw[1;3H[K[2;1H[34m[47m [m#!/usr/bin/env python2.6[63;1H[K[63;1H[1m-- INSERT --[m[86C1,2[11CTop[1;3H[?12l[?25h[63;1H[K[1;2H[?25l[63;89H^[[1;2H[?12l[?25h[?25l[63;89H  [1;3H[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89Hu[1;2H[61;1H1 line less; before #1  3 seconds ago[63;89H[K[1;2H[34m[47m [m#!/usr/bin/env python2.6[2;2H# -*- coding: utf-8[2;21H[K[3;1H[34m[47m [mimport re[3;11H[K[4;8H threading[5;2H[K[7;1H[34m[47m+0------------------------------------------------------------------------------------------------------------------[8;1H [m[8;2H[K[9;1H[34m[47m+0------------------------------------------------------------------------------------------------------------------[10;1H [m[10;2H[K[11;1H[34m[47m+0------------------------------------------------------------------------------------------------------------------[12;1H [m[12;2H[K[13;1H[34m[47m+0------------------------------------------------------------------------------------------------------------------[14;1H [m[14;2H[K[15;1H[34m[47m [mif __name__ == "__main__":[16;2H[K[17;5H sample_text = """A:ds3-kha3# show version
[34m[47m [mTiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210 Copyright (c) 2000-2015 Alcatel-Lucent.
[34m[47m [mAll rights reserved. All use subject to applicable license agreements.[19;72H[K[20;1H[34m[47m [mBuilt on Thu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main
[34m[47m [mA:ds3-kha3# shov [34m^[[m[1D [34m^[[m[1D[34m^[[m[1D [34m^[[m[1Dwp[34m^[[m[1D [34m^[[m[1D bof[21;58H[K[22;1H[34m[47m [m===============================================================================
[34m[47m [mBOF (Memory)[23;14H[K[24;1H[34m[47m [m===============================================================================
[34m[47m [m    primary-image      cf1:\images\TiMOS-7.0.R9\both.tim[25;58H[K[26;5H secondary-image[21C-B-4.0.R2\both.tim[27;5H primary-config [8C\ds3-kha3.cfg[27;42H[K[28;1H[34m[47m [m#eth-mgmt Port Settings:[28;26H[K[29;1H[34m[47m [m    no  eth-mgmt-disabled[30;5H eth-mgmt-address   10.50.70.46/24 active[31;14H-route     10.44.1.219/32 next-hop 10.50.70.1[32;14H-autoneg[32;25H[K[33;14H-duplex    full[34;14H-speed     100[34;28H[K[35;1H[34m[47m [m#uplinkA Port Settings:[35;25H[K[36;1H[34m[47m [m    uplinkA-port       1/1/7[37;13H-autoneg[37;25H[K[38;13H-duplex     full[39;13H-speed      1000[40;13H-address    0[40;26H[K[41;13H-vlan   
[34m[47m [m#uplinkB Port Settings:[42;25H[K[43;1H[34m[47m [m    uplinkB-port       1/1/2[44;13H-autoneg[44;25H[K[45;13H-duplex     full[46;13H-speed      1000[47;13H-address    0[47;26H[K[48;13H-vlan   
[34m[47m [m#System Settings:[49;25H[K[50;1H[34m[47m [m    wait               3[51;5H persist[11C on[52;5H console-speed      115200[53;5H uplink-mode        network[54;6Huse-expansion-card-type   m2-xfp[55;5H no  console-disabled[55;26H[K[56;1H[34m[47m [m===============================================================================
[34m[47m [mA:ds3-kha3# file version cf1:\images\TiMOS-7.0.R9\both.tim[57;60H[K[58;1H[34m[47m [mTiMOS-B-7.0.R9 for 7210 SAS-M[58;31H[K[59;2HThu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main
[34m[47m [mA:ds3-kha3# file version boot.tim[60;35H[K[63;99H1,1[11CTop[1;2H[?12l[?25h[?25l[63;89H:[1;2H[61;1H[K[63;89H[K[61;1H:[?12l[?25h7[?25l[?12l[?25h9[?25l[?12l[?25h[?25l[13;2H[63;99H79,43-1[7CTop[13;2H[?12l[?25h[?25l[63;89Hz[13;2H[?12l[?25h[?25l[63;90Ho[13;2H[63;89H  [17;44H[13;1H[34m[47m-[mdef ds_print(ds, message, io_lock=None):[13;42H[K[14;1H[34m[47m+0------------------------------------------------------------------------------------------------------------------[15;1H|[m    assert(io_lock and[15;24H[K[16;1H[34m[47m|[m[10C io_lock.__class__.__name__ in [threading.Lock().__class__.__name__,
[34m[47m|[m                                          threading.RLock().__class__.__name__])
[34m[47m|[m    if io_lock: io_lock.acquire()[18;35H[K[19;1H[34m[47m|[m    print "{ds} : {message}".format(ds=ds, message=message)[19;61H[K[20;1H[34m[47m|[m    if io_lock: io_lock.release()[20;35H[K[21;1H[34m[47m|[m[21;2H[K[22;2H[K[23;1H[34m[47m [mif __name__ == "__main__":[24;2H[K[25;5H sample_text = """A:ds3-kha3# show version[25;47H[K[26;1H[34m[47m [mTiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210 Copyright (c) 2000-2015 Alcatel-Lucent.
[34m[47m [mAll rights reserved. All use subject to applicable license agreements.
[34m[47m [mBuilt on Thu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main
[34m[47m [mA:ds3-kha3# shov [34m^[[m[1D [34m^[[m[1D[34m^[[m[1D [34m^[[m[1Dwp[34m^[[m[1D [34m^[[m[1D bof
[34m[47m [m===============================================================================
[34m[47m [mBOF (Memory)[31;14H[K[32;1H[34m[47m [m===============================================================================[33;5H primary-image      cf1:\images\TiMOS-7.0.R9\both.tim[34;5H secondary-image    cf1:\images\TiMOS-B-4.0.R2\both.tim
[34m[47m [m    primary-config     cf1:\ds3-kha3.cfg
[34m[47m [m#eth-mgmt Port Settings:[36;26H[K[37;5H no  eth-mgmt-disabled[38;5H eth-mgmt-address   10.50.70.46/24 active[39;5H eth-mgmt-route     10.44.1.219/32 next-hop 10.50.70.1[40;5H eth-mgmt-autoneg[40;25H[K[41;5H eth-mgmt-duplex    full
[34m[47m [m    eth-mgmt-speed     100
[34m[47m [m#uplinkA Port Settings:[43;25H[K[44;11HkA-port       1/1/7[45;11HkA-autoneg[45;25H[K[46;11HkA-duplex     full[47;11HkA-speed      1000[48;11HkA-address
[34m[47m [m    uplinkA-vlan       0
[34m[47m [m#uplinkB Port Settings:[50;25H[K[51;5H uplinkB-port       1/1/2[52;5H uplinkB-autoneg[52;25H[K[53;11HkB-duplex     full[53;29H[K[54;6HuplinkB-speed      1000[54;32H[K[55;5H uplinkB-address    0
[34m[47m [m    uplinkB-vlan       0[56;26H[K[57;1H[34m[47m [m#System Settings:[57;19H[K[58;1H[34m[47m [m    wait               3[58;26H[K[59;1H[34m[47m [m    persist            on[59;27H[K[60;1H[34m[47m [m    console-speed      115200[60;31H[K[63;104H  [17;44H[?12l[?25h[?25l[63;89H~@k[17;44H[63;89H   [16;2H[63;100H8,1 [16;2H[?12l[?25h[?25l[63;89H~@k[16;2H[63;89H   [16;2H[?12l[?25h[?25l[63;89H~@k[16;2H[63;89H   [16;3H[63;102H2[16;3H[?12l[?25h[?25l[63;89H~@k[16;3H[63;89H   [16;4H[63;102H3[16;4H[?12l[?25h[?25l[63;89H~@k[16;4H[63;89H   [16;5H[63;102H4[16;5H[?12l[?25h[?25l[63;89H~@k[16;5H[63;89H   [16;6H[63;102H5[16;6H[?12l[?25h[?25l[63;89H~@k[16;6H[63;89H   [16;7H[63;102H6[16;7H[?12l[?25h[?25l[63;89H~@k[16;7H[63;89H   [16;8H[63;102H7[16;8H[?12l[?25h[?25l[63;89H~@k[16;8H[63;89H   [16;9H[63;102H8[16;9H[?12l[?25h[?25l[63;89H~@k[16;9H[63;89H   [16;10H[63;102H9[16;10H[?12l[?25h[?25l[63;89H~@k[16;10H[63;89H   [16;11H[63;102H10[16;11H[?12l[?25h[?25l[63;89H~@k[16;11H[63;89H   [16;12H[63;103H1[16;12H[?12l[?25h[?25l[63;89H~@k[16;12H[63;89H   [16;13H[63;103H2[16;13H[?12l[?25h[?25l[63;89H~@k[16;13H[63;89H   [16;14H[63;103H3[16;14H[?12l[?25h[?25l[63;89H~@k[16;14H[63;89H   [16;15H[63;103H4[16;15H[?12l[?25h[?25l[63;89H~@k[16;15H[63;89H   [16;16H[63;103H5[16;16H[?12l[?25h[?25l[63;89H~@k[16;16H[63;89H   [16;17H[63;103H6[16;17H[?12l[?25h[?25l[63;89H~@k[16;17H[63;89H   [16;18H[63;103H7[16;18H[?12l[?25h[?25l[63;89H~@k[16;18H[63;89H   [16;19H[63;103H8[16;19H[?12l[?25h[?25l[63;89H~@k[16;19H[63;89H   [16;20H[63;103H9[16;20H[?12l[?25h[?25l[63;89H~@k[16;20H[63;89H   [16;21H[63;102H20[16;21H[?12l[?25h[?25l[63;89H~@k[16;21H[63;89H   [16;22H[63;103H1[16;22H[?12l[?25h[?25l[63;89H~@k[16;22H[63;89H   [16;23H[63;103H2[16;23H[?12l[?25h[?25l[63;89H~@k[16;23H[63;89H   [16;24H[63;103H3[16;24H[?12l[?25h[?25l[63;89H~@k[16;24H[63;89H   [16;25H[63;103H4[16;25H[?12l[?25h[?25l[63;89H~@k[16;25H[63;89H   [16;26H[63;103H5[16;26H[?12l[?25h[?25l[63;89H~@k[16;26H[63;89H   [16;27H[63;103H6[16;27H[?12l[?25h[?25l[63;89H~@k[16;27H[63;89H   [16;28H[63;103H7[16;28H[?12l[?25h[?25l[63;89H~@k[16;28H[63;89H   [16;29H[63;103H8[16;29H[?12l[?25h[?25l[63;89H~@k[16;29H[63;89H   [16;30H[63;103H9[16;30H[?12l[?25h[?25l[63;89H~@k[16;30H[63;89H   [16;31H[63;102H30[16;31H[?12l[?25h[?25l[63;89H~@k[16;31H[63;89H   [16;32H[63;103H1[16;32H[?12l[?25h[?25l[63;89H~@k[16;32H[63;89H   [16;33H[63;103H2[16;33H[?12l[?25h[?25l[63;89H~@k[16;33H[63;89H   [16;34H[63;103H3[16;34H[?12l[?25h[?25l[63;89H~@k[16;34H[63;89H   [16;35H[63;103H4[16;35H[?12l[?25h[?25l[63;89H~@k[16;35H[63;89H   [16;36H[63;103H5[16;36H[?12l[?25h[?25l[63;89H~@k[16;36H[63;89H   [16;37H[63;103H6[16;37H[?12l[?25h[?25l[63;89H~@k[16;37H[63;89H   [16;38H[63;103H7[16;38H[?12l[?25h[?25l[63;89H~@k[16;38H[63;89H   [16;39H[63;103H8[16;39H[?12l[?25h[?25l[63;89H~@k[16;39H[63;89H   [16;40H[63;103H9[16;40H[?12l[?25h[?25l[63;89H~@k[16;40H[63;89H   [16;41H[63;102H40[16;41H[?12l[?25h[?25l[63;89H~@k[16;41H[63;89H   [16;40H[63;102H39[16;40H[?12l[?25h[?25l[63;89Hi[16;40H[63;89H [16;40H[63;1H[1m-- INSERT --[m[63;99H[K[63;99H78,39[9CTop[16;40H[?12l[?25h[?25l nin [threading.Lock().__class__.__name__,[63;102H40[16;41H[?12l[?25h[?25lnoin [threading.Lock().__class__.__name__,[63;103H1[16;42H[?12l[?25h[?25lotin [threading.Lock().__class__.__name__,[63;103H2[16;43H[?12l[?25h[?25lt in [threading.Lock().__class__.__name__,[63;103H3[16;44H[?12l[?25h[63;1H[K[16;43H[?25l[63;89H^[[16;43H[?12l[?25h[?25l[63;89H  [16;44H[61;1H[K[63;99H78,42[9CTop[16;43H[?12l[?25h[?25l[63;89H:[16;43H[63;89H[K[61;1H:[?12l[?25hw[?25l[?12l[?25hq[?25l[?12l[?25h[?25l"./ds_helper.py" 170L, 5659C written[Pymode] Regenerate Rope cache ... [61;36H[K[61;10HInit Rope project: /home/pmalko/script/ds_bkp[61;10HCode checking is running ...[61;38H[K[61;27Hcompleted. No errors found.[61;10HFound errors and warnings: 0[61;38H[K[63;1H
[?1l>[?12l[?25h[?1049l]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ vim ./ds_helper.pyfg[Kjobs[Kvim ./backup_ds.py ./backup_ds.py ds1-kha3 ds2-kha3
Password for DS:
Enter a for "After" or b for "Before"
: b
Start running: 12:12:1482746529
Exception in thread ds1-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 39, in get_file_name
    ds_print(ds, "*** SSH establish with ")
  File "/home/pmalko/script/ds_bkp/ds_helper.py", line 79, in ds_print
    threading.RLock().__class__.__name__])
AssertionError

Exception in thread ds2-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 39, in get_file_name
    ds_print(ds, "*** SSH establish with ")
  File "/home/pmalko/script/ds_bkp/ds_helper.py", line 79, in ds_print
    threading.RLock().__class__.__name__])
AssertionError

Finish running: 12:12:1482746569
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git [K reset --had[Krd HEAD 
HEAD is now at 22e5831 Correct assert in ds_print
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git reset --hard HEAD ./backup_ds.py ds1-kha3 ds2-kha3
Password for DS:
Enter a for "After" or b for "Before"
: a
Start running: 12:12
Exception in thread ds2-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 39, in get_file_name
    ds_print(ds, "*** SSH establish with ")
  File "/home/pmalko/script/ds_bkp/ds_helper.py", line 79, in ds_print
    RLock().__class__.__name__])
AssertionError

Exception in thread ds1-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 39, in get_file_name
    ds_print(ds, "*** SSH establish with ")
  File "/home/pmalko/script/ds_bkp/ds_helper.py", line 79, in ds_print
    RLock().__class__.__name__])
AssertionError

Finish running: 12:12
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ ./backup_ds.py ds1-kha3 ds2-kha3[10Pgit reset --hard HEAD 
HEAD is now at b2dde7a Correct 2-th assert in ds_print
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git reset --hard HEAD ./backup_ds.py ds1-kha3 ds2-kha3
Password for DS:
Enter a for "After" or b for "Before"
: b
Start running: 12:12
ds1-kha3 : Error while authorize.
./backup_ds.py:35: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
  ds_print(ds, e.message)
ds1-kha3 : Authentication failed.
ds2-kha3 : *** SSH establish with 
ds1-kha3 : *** SSH establish with 
No handlers could be found for logger "paramiko.transport"
ds2-kha3 : *** Config file name cf1:\ds2-kha3.cfg
Exception in thread ds2-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 76, in get_file
    ds_print(ds, "*** SCP connect establish ", io_lock)
  File "/home/pmalko/script/ds_bkp/ds_helper.py", line 79, in ds_print
    io_lock.__class__.__name__ in [Lock().__class__.__name__,
AttributeError: __class__

Exception in thread ds1-kha3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./backup_ds.py", line 106, in copy_ds_backup
    mv_to_140(DS, get_file(DS, user, secret, name, get_file_name(DS, user, secret).replace('cf1:\\', '')))
  File "./backup_ds.py", line 40, in get_file_name
    channel = client.invoke_shell()
  File "/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg/paramiko/client.py", line 428, in invoke_shell
    chan = self._transport.open_session()
  File "/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg/paramiko/transport.py", line 702, in open_session
    timeout=timeout)
  File "/home/erkki/.local/lib/python2.6/site-packages/paramiko-1.16.0-py2.6.egg/paramiko/transport.py", line 823, in open_channel
    raise e
EOFError

Finish running: 12:12
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ vim [K[K[K[Kssh ds1-kha3
TiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210 Copyright (c) 2000-2015 Alcatel-Lucent.
All rights reserved. All use subject to applicable license agreements.
Built on Thu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main

pmalko@ds1-kha3's password: 


A:ds1-kha3# show [1D [1D 
alarm-contact-input    alias                  bof                    boot-messages          card  
chassis                config                 connection-profile     cron                   debug  
eth-cfm                eth-ring               filter                 ipsec                  lag  
log                    mda                    mirror                 pools                  port  
qos                    radius                 redundancy             router                 saa  
service                snmp                   split-horizon-group    system                 test-oam  
testhead               time                   uptime                 users                  version  
vrrp
A:ds1-kha3# show alias 

==============================================================================
Alias-Name                    Alias-command-name
==============================================================================
No aliases used
==============================================================================
A:ds1-kha3# show [1D [1D 
alarm-contact-input    alias                  bof                    boot-messages          card  
chassis                config                 connection-profile     cron                   debug  
eth-cfm                eth-ring               filter                 ipsec                  lag  
log                    mda                    mirror                 pools                  port  
qos                    radius                 redundancy             router                 saa  
service                snmp                   split-horizon-group    system                 test-oam  
testhead               time                   uptime                 users                  version  
vrrp
A:ds1-kha3# show con
config                 connection-profile
A:ds1-kha3# show config 
WARNING: CLI This command has been removed for security reasons, please use "admin display-config".
A:ds1-kha3# show system 
A:ds1-kha3>show>system# exit 
A:ds1-kha3# exit [5D     [5Dshow system [1D [1D 
alarms                       connections                  cpu                          information  
internal-loopback-ports      lldp                         memory-pools                 ntp  
ptp                          resource-profile             security                     sntp  
switch-fabric                sync-if-timing               thresholds                   time  
vwm-shelf
A:ds1-kha3# show system information [1D [1D 
A:ds1-kha3# show system information 

===============================================================================
System Information
===============================================================================
System Name            : ds1-kha3
System Type            : 7210 SAS-M-1
System Version         : B-7.0.R9
System Contact         : 
System Location        : 
System Coordinates     : 
System Up Time         : 39 days, 07:37:09.75 (hr:min:sec)
 
SNMP Port              : 161
SNMP Engine ID         : 0000197f00000025ba01af80
SNMP Engine Boots      : 5
SNMP Max Message Size  : 9216
SNMP Admin State       : Enabled
SNMP Oper State        : Enabled
SNMP Index Boot Status : Persistent
SNMP Sync State        : N/A
 
Tel/Tel6/SSH/FTP Admin : Enabled/Disabled/Enabled/Enabled
Tel/Tel6/SSH/FTP Oper  : Up/Down/Up/Up
 
BOF Source             : cf1:
Image Source           : primary
Config Source          : primary
Last Booted Config File: cf1:\ds1-kha3.cfg
Last Boot Cfg Version  : FRI NOV 11 11:37:49 2016 UTC
Last Boot Config Header: # TiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210
                         Copyright (c) 2000-2015 Alcatel-Lucent. # All rights
                         reserved. All use subject to applicable license
                         agreements. # Built on Thu Oct 15 08:11:18 IST 2015
                         by builder in /home/builder/7.0B1/R9/panos/main #
                         Generated FRI NOV 11 11:37:49 2016 UTC
Last Boot Index Version: FRI NOV 11 11:37:49 2016 UTC
Last Boot Index Header : # TiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210
                         Copyright (c) 2000-2015 Alcatel-Lucent. # All rights
                         reserved. All use subject to applicable license
                         agreements. # Built on Thu Oct 15 08:11:18 IST 2015
                         by builder in /home/builder/7.0B1/R9/panos/main #
                         Generated FRI NOV 11 11:37:49 2016 UTC
Last Saved Config      : cf1:\ds1-kha3.cfg
Time Last Saved        : 2016/12/08 11:57:54
Changes Since Last Save: No
User Last Modified     : vvoytsovich
Max Cfg/BOF Backup Rev : 5
Cfg-OK Script          : N/A
Cfg-OK Script Status   : not used
Cfg-Fail Script        : N/A
Cfg-Fail Script Status : not used
 
Management IP Addr     : 10.50.70.44/24
Primary DNS Server     : N/A
Secondary DNS Server   : N/A
Tertiary DNS Server    : N/A
DNS Domain             : (Not Specified)
DNS Resolve Preference : ipv4-only
BOF Static Routes      :  
  To                   Next Hop            
Press any key to continue (Q to quit)                                         10.44.1.219/32       10.50.70.1          
 
 
ICMP Vendor Enhancement: Disabled
===============================================================================

===============================================================================
System Oper Group Information
===============================================================================
Name                             Oper   Creation Hold   Hold   Members Monitor
                                 Status Origin   UpTime DnTime         
                                                 (secs) (secs)         
-------------------------------------------------------------------------------
No Matching Entries
===============================================================================
A:ds1-kha3# q[1D [1Dshow system information [1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1Dfile [1D [1D 
attrib    cd        copy      delete    dir       md        move      rd        scp       shutdown  type      
version   vi
A:ds1-kha3# file [1D [1D 
attrib    cd        copy      delete    dir       md        move      rd        scp       shutdown  type      
version   vi
A:ds1-kha3# file type [1D [1D 
<file-url>

A:ds1-kha3# file type cf1:// [1D [1D[1D [1D [1D [1D 
A:ds1-kha3# file type cf1:/ [1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1D[1D [1Dshow bof 
===============================================================================
BOF (Memory)
===============================================================================
    primary-image      cf1:\images\TiMOS-7.0.R9\both.tim
    secondary-image    cf1:\images\TiMOS-B-4.0.R2\both.tim
    primary-config     cf1:\ds1-kha3.cfg
#eth-mgmt Port Settings:
    no  eth-mgmt-disabled
    eth-mgmt-address   10.50.70.44/24 active
    eth-mgmt-route     10.44.1.219/32 next-hop 10.50.70.1
    eth-mgmt-autoneg
    eth-mgmt-duplex    full
    eth-mgmt-speed     100
#uplinkA Port Settings:
    uplinkA-port       1/1/24
    uplinkA-autoneg
    uplinkA-duplex     full
    uplinkA-speed      1000
    uplinkA-address    0 
    uplinkA-vlan       0
#System Settings:
    wait               3
    persist            on
    console-speed      115200
    uplink-mode        network
    use-expansion-card-type   m2-xfp
    no  console-disabled
===============================================================================
A:ds1-kha3# file type cf1:\ds1-kha3.cfg 
File: ds1-kha3.cfg
-------------------------------------------------------------------------------
# TiMOS-B-7.0.R9 both/mpc ALCATEL SAS-M 7210 Copyright (c) 2000-2015 Alcatel-Lucent.
# All rights reserved. All use subject to applicable license agreements.
# Built on Thu Oct 15 08:11:18 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main

# Generated THU DEC 08 09:57:47 2016 UTC

exit all
configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "ds1-kha3"
        alarm-contact-input 1
            shutdown
        exit
        alarm-contact-input 2
            shutdown
        exit
        alarm-contact-input 3
            shutdown
        exit
        alarm-contact-input 4
            shutdown
        exit
        qos
        exit
        resource-profile
            ingress-internal-tcam
                qos-sap-ingress-resource 5
                exit
                acl-sap-ingress 5
                exit
            exit
            egress-internal-tcam
            exit
            router
            exit
            decommission
            exit
        exit
        snmp
            packet-size 9216
        exit
        time
            ntp
                server 172.16.2.225
                no shutdown
            exit
            sntp
                shutdown
            exit
            dst-zone EEST
                start last sunday march 02:00
                end last sunday october 03:00
            exit
            zone EET 
        exit
Press any key to continue (Q to quit)                                               thresholds
            rmon
            exit
            cflash-cap-alarm cf1-A: rising-threshold 102400000 interval 3600 
            memory-use-alarm rising-threshold 800000000 interval 3600 
        exit
    exit
#--------------------------------------------------
echo "System Security Configuration"
#--------------------------------------------------
    system
        security
            telnet-server
            ftp-server
            profile "cramer"
                default-action deny-all
                entry 1
                    match "show"
                    action permit
                exit
                entry 2
                    match "exit"
                    action permit
                exit
                entry 3
                    match "ping"
                    action permit
                exit
                entry 4
                    match "traceroute"
                    action permit
                exit
                entry 5
                    match "environment"
                    action permit
                exit
                entry 6
                    match "logout"
                    action permit
                exit
            exit
            profile "cfg-backup"
                default-action deny-all
                entry 1
                    match "admin display-config"
                    action permit
                exit
                entry 2
                    match "exit"
                    action permit
                exit
                entry 4
                    match "show bof"
                    action permit
                exit
                entry 5
                    match "file copy"
                    action permit
                exit
                entry 6
                    match "admin save"
Press any key to continue (Q to quit)                                       A:ds1-kha3# logout 
Connection to ds1-kha3 closed.
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ [9P(reverse-i-search)`':[C[23@r': git reset --hard HEAD[1@e[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git reset --hard HEAD
HEAD is now at 4e9ba08 Correct loginning
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git reset --hard HEAD[9Pssh ds1-kha3./backup_ds.py ds1-kha3 ds2-kha3
Password for DS:
Enter a for "After" or b for "Before"
: b
Start running: 14:12
ds2-kha3 : Can`t authorize
ds2-kha3 : Error wile backing
ds1-kha3 : Can`t authorize
ds1-kha3 : Error wile backing
Finish running: 14:12
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ ./backup_ds.py ds1-kha3 ds2-kha3[K[K[K[K[K[K[K[K
Password for DS:
Enter a for "After" or b for "Before"
: b
Start running: 14:12
ds1-kha3 : Can`t authorize
ds1-kha3 : Error wile backing
Finish running: 14:12
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ cp [K[K[Kcp /home/pmalko/script/ds_bkp/v[Kbackup_ds.py[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P/script/ds_bkp/backup_ds.py[1P/script/ds_bkp/backup_ds.py[1P/script/ds_bkp/backup_ds.py[1P/script/ds_bkp/backup_ds.py[1P/script/ds_bkp/backup_ds.py[1P/script/ds_bkp/backup_ds.pyb/script/ds_bkp/backup_ds.pyu/script/ds_bkp/backup_ds.pyt/script/ds_bkp/backup_ds.pyk/script/ds_bkp/backup_ds.pyo/script/ds_bkp/backup_ds.py[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C /home/pmalko/script/ds_bkp/backup_ds.py.old [A
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git commit [K[K[K[K[K[K[Kadd --all
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ git commit -m " [KAdd bac[K[K[Kold backup file"
[threadet 2dc67cd] Add old backup file
 3 files changed, 436 insertions(+), 0 deletions(-)
 create mode 100755 backup_ds.py.old
 create mode 100755 backup_ds.py~
 create mode 100755 ds_helper.py~
]0;pmalko@figaro: ~/script/ds_bkppmalko@figaro:~/script/ds_bkp$ 